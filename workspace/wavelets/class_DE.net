# Class DE amplifier (non ideal operation)

.options sparse=1 maxdelta=20. softiter=80 maxiter=200 verbose=0 gyr=.01

.analysis ssw T=943ns nsamples=128 shell=0 deriv=Fourier multilevel=false wavelet=none
#.analysis fdtd T=943ns nsamples=256
#.analysis tran tstep=1ns tstop=10us

# Supply
vdc:vdd 1 gnd vdc=20V rint=2
vdc:vss 2 gnd vdc=-20V rint=2

# Switch
vpulse:vp 1 3 v1=0 v2=5V rint=50 td=0 tf=2ns tf=2ns pw=215ns per=943ns
acms_i:mp out1 3 1 1 w=230e-6 l=1e-6 type=p isq=40nA vth=-1V

vpulse:vn 4 2 v1=0 v2=5V rint=50 td=471.5ns tf=2ns tf=2ns pw=215ns per=943ns
acms_i:mn out1 4 2 2 w=230e-6 l=1e-6 type=n isq=40nA vth=1V

# Load
vdc:amp out1 out vdc=0
cap:cp out gnd c=173pF
cap:cs out 7 c=3.69pF
ind:ls 7 8 l=6185uH 
res:rs 8 gnd r=370
res:r1 out gnd r=10k

.plot ssw 3 4 out
#.plot ssw vdc:vdd:i vdc:vss:i
.plot ssw vdc:amp:i 
.plot fdtd out
.plot tran 3 4 out
.plot tran vdc:amp:i 

.end

